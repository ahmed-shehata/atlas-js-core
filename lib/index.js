!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("AtlasSDK",[],t):"object"==typeof exports?exports.AtlasSDK=t():e.AtlasSDK=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t,n){var r,o,i;!function(n,a){o=[e,t],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return function(t){var r=this;Object.keys(e).forEach(function(o){var i=e[o],a=i.key,s=i.type,c=i.model,l=i.optional;if(t){var u=t[a];if(!l||u){if(Array.isArray(u))c&&(u=u.map(function(e){return new c(e)}));else if(c&&(u=new c(u)),(void 0===u?"undefined":n(u))!==s)throw new Error("Model validation error: "+a+" is not of type "+s+". The value is "+u);Object.defineProperty(r,o,{value:u,writable:!1,enumerable:!0,configurable:!0})}}})}};t.default=r,e.exports=t.default})},function(e,t,n){var r,o,i;!function(a,s){o=[t,n(0),n(7)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Price=e.Article=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(t),o=(0,r.default)({type:{key:"type",type:"string"},mediaCharacter:{key:"mediaCharacter",type:"string"},resolutions:{key:"resolutions",type:"object"}}),i=(0,r.default)({type:{key:"type",type:"string"},mediaCharacter:{key:"mediaCharacter",type:"string"},url:{key:"url",type:"string"}}),a=(0,r.default)({name:{key:"name",type:"string"}}),s=(0,r.default)({id:{key:"id",type:"string"},name:{key:"name",type:"string"},detailURL:{key:"detail_url",type:"string"}}),c=(0,r.default)({amount:{key:"amount",type:"number"},currency:{key:"currency",type:"string"}}),l=(0,r.default)({id:{key:"id",type:"string"},size:{key:"size",type:"string"},price:{key:"price",type:"object",model:c},originalPrice:{key:"original_price",type:"object",model:c},available:{key:"available",type:"boolean"},stock:{key:"stock",type:"number",optional:!0},partner:{key:"partner",type:"object",model:s}}),u=(0,r.default)({name:{key:"name",type:"string"},values:{key:"values",type:"string"}}),d=(0,r.default)({id:{key:"id",type:"string"},name:{key:"name",type:"string"},color:{key:"color",type:"string"},detailUrl:{key:"detail_url",type:"string",optional:!0},brand:{key:"brand",type:"object",model:a},units:{key:"units",type:"object",model:l},images:{key:"images",type:"object",model:o,optional:!0},videos:{key:"videos",type:"object",model:i,optional:!0},attributes:{key:"attributes",type:"object",model:u,optional:!0},infos:{key:"infos",type:"string",optional:!0},reviews:{key:"reviews",type:"object",model:n.Reviews,optional:!0}});e.Article=d,e.Price=c})},function(e,t,n){var r,o,i;!function(n,a){o=[t],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!t)throw new Error("options and default options values are mandatory");var r=n?e[n]:e;return r?Object.assign({},t,r):t};e.mergePlainOptsWithDefault=t})},function(e,t,n){var r,o,i;!function(a,s){o=[t,n(0)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=e.SalesChannel=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(t),r=(0,n.default)({locale:{key:"locale",type:"string"},channel:{key:"sales-channel",type:"string"},tocURL:{key:"toc_url",type:"string"}}),o=(0,n.default)({location:{key:"location",type:"string"},type:{key:"type",type:"string"},channel:{key:"channel",type:"string"}}),i=(0,n.default)({catalogApi:{key:"atlas-catalog-api",type:"object"},atlasCheckoutGateway:{key:"atlas-checkout-gateway",type:"object"},salesChannels:{key:"sales-channels",type:"object",model:r},clientId:{key:"client_id",type:"string"},salesChannel:{key:"sales_channel",type:"string"},recommendations:{key:"recommendations",type:"object",model:o},isSandbox:{key:"is_sandbox",type:"boolean"}});e.SalesChannel=r,e.Config=i})},function(e,t,n){var r,o,i;!function(a,s){o=[e,t,n(9),n(5),n(3)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n),a={configure:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.is_sandbox?"staging":"production",n="https://atlas-config-api.dc.zalan.do/api/config/"+e.client_id+"-"+t+".json",i={url:n,method:"GET",headers:{Accept:"application/json"},transform:function(t){return new o.Config(Object.assign(t,e))}};return(0,r.fetchEndpoint)(i).then(function(e){return new r.AtlasSDKClient(e)})}};t.default=Object.assign(a,i),e.exports=t.default})},function(e,t,n){var r,o,i;!function(a,s){o=[t,n(1),n(8),n(10),n(6),n(2),n(11)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n,r,o,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return fetch(e.url,{method:e.method,mode:e.mode,redirect:e.redirect,headers:e.headers,body:e.body}).then(u).then(d).then(function(e){return e.json()}).then(function(t){return e.transform(t)}).catch(function(e){throw console.error(e),e})}Object.defineProperty(e,"__esModule",{value:!0}),e.checkRedirect=e.checkStatus=e.fetchEndpoint=e.AtlasSDKClient=void 0;var c=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){if(e.status>=200&&e.status<399)return e;var t=new Error(e.statusText+": "+e.status);throw t.response=e,t},d=function(e){return e.headers.get("Location")?new Response(JSON.stringify({redirect_url:e.headers.get("Location")})):e},p=function(){function e(t){a(this,e),this.config=t}return l(e,[{key:"getLocale",value:function(){var e=this;return this.config.salesChannels.find(function(t){return t.channel===e.config.salesChannel}).locale}},{key:"getLanguage",value:function(){return this.getLocale().substring(0,this.getLocale().indexOf("_"))}},{key:"getCountryCode",value:function(){return this.getLocale().substring(this.getLocale().indexOf("_")+1)}},{key:"getConfig",value:function(){return this.config}},{key:"getArticle",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s({url:this.config.catalogApi.url+"/articles/"+e+"?client_id="+this.config.clientId,method:"GET",headers:{Accept:"application/x.zalando.article+json, application/x.problem+json","X-Sales-Channel":this.config.salesChannel,"X-UID":this.config.clientId},transform:function(e){var r=(0,c.default)(e,n);return new t.Article(r)}}).then(function(e){return e})}},{key:"getCheckout",value:function(e,t){return s({url:this.config.atlasCheckoutGateway.url+"/guest-checkout/api/checkouts/"+e+"/"+t,method:"GET",headers:{"Content-Type":"application/x.zalando.guest-checkout+json",Accept:"application/x.zalando.guest-checkout+json, application/x.problem+json","X-Sales-Channel":this.config.salesChannel,"X-UID":this.config.clientId,checkout_id:e,token:t},transform:function(e){return new n.GetCheckoutResponse(e)}}).then(function(e){return e})}},{key:"createOrder",value:function(e,t){var r=this.config.atlasCheckoutGateway.url+"/guest-checkout/api/orders",o=JSON.stringify({checkout_id:e,token:t});return s({url:r,method:"POST",headers:{"Content-Type":"application/x.zalando.order.create.continue+json",Accept:"application/x.zalando.order.create.response+json, application/x.problem+json","X-Sales-Channel":this.config.salesChannel,"X-UID":this.config.clientId},body:o,transform:function(e){return new n.CreateOrderResponse(e)}}).then(function(e){return e})}},{key:"getRecommendations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,i.mergePlainOptsWithDefault)(t,{reco_id:"",tracking_string:""}),o=n.reco_id,a=n.tracking_string,l=this.config,u=l.catalogApi.url,d=l.recommendations[0].type;return s({url:u+"/articles/"+e+"/recommendations/?client_id="+l.clientId+"&anon_id="+o,method:"GET",headers:{"Content-Type":"application/x.zalando.article.recommendation+json",Accept:"application/x.zalando.article.recommendation+json, application/x.problem+json","X-Sales-Channel":l.salesChannel,"X-UID":l.clientId,"X-Reco-Location":l.recommendations[0].location,"X-Reco-Type":d,"X-Channel":l.recommendations[0].channel,"X-Tracking-String":a},transform:function(e){var n=[];return e[d].forEach(function(e){var o=(0,c.default)(e,t);n.push(new r.RecommendedArticles(o))}),n}}).then(function(e){return e})}},{key:"createGuestCheckout",value:function(e){return s({url:this.config.atlasCheckoutGateway.url+"/guest-checkout/api/orders",method:"POST",mode:"cors",redirect:"manual",headers:{"Content-Type":"application/x.zalando.order.create+json",Accept:"application/x.zalando.order.create.response+json, application/x.problem+json","X-Sales-Channel":this.config.salesChannel,"X-UID":this.config.clientId},body:e,transform:function(e){return e.redirect_url?new n.CreateOrderRedirectResponse(e):new n.CreateOrderResponse(e)}}).then(function(e){return e})}}]),e}();e.AtlasSDKClient=p,e.fetchEndpoint=s,e.checkStatus=u,e.checkRedirect=d})},function(e,t,n){var r,o,i;!function(a,s){o=[t,n(2)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCdnAndResolutions=e.createImageItem=e.createVideoItem=e.isVideo=e.isImage=void 0;var n=["mosaic01","mosaic02"],r={thumbnail:"pdp-thumb",thumbnail_hd:"thumb_hd",small:"catalog",small_hd:"catalog_hd",medium:"detail",medium_sd:"pdp-gallery",medium_hd:"detail_hd",large:"large",large_hd:"large_hd"},o=["thumbnail","medium","large"],i={cdn:n[0],image_resolutions:o},a=function(e){return-1!==["IMAGE","IMAGE_360","IMAGE_PARTNER"].indexOf(e)},s=function(e){return-1!==["VIDEO_THUMBNAIL","VIDEO_HD","VIDEO_LOW"].indexOf(e)},c=function(e,t,n){var o={};return Object.keys(n).forEach(function(n){o[n]="https://"+t+".ztat.net/vgs/media/"+r[n]+"/"+e.path}),{type:e.type,mediaCharacter:e.media_character,resolutions:o}},l=function(e,t){return{type:e.type,mediaCharacter:e.media_character,url:"https://"+t+".ztat.net/vgs"+e.path}},u=function(e){return Object.keys(r).filter(function(t){return-1!==e.indexOf(t)}).reduce(function(e,t){return e[t]=r[t],e},{})},d=function(e){var n=(0,t.mergePlainOptsWithDefault)(e,i,"media"),r=n.cdn,o=n.image_resolutions;return{cdn:r,imageResolutions:u(o)}};e.default=function(e,t){var n=d(t),r=n.cdn,o=n.imageResolutions;return e.images=[],e.videos=[],e.media&&e.media.media_items&&(e.media.media_items.forEach(function(t){a(t.type)?e.images.push(c(t,r,o)):s(t.type)&&e.videos.push(l(t,r))}),delete e.media),e},e.isImage=a,e.isVideo=s,e.createVideoItem=l,e.createImageItem=c,e.getCdnAndResolutions=d})},function(e,t,n){var r,o,i;!function(a,s){o=[t,n(0)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Reviews=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(t),r=(0,n.default)({level:{key:"level",type:"string",optional:!0},count:{key:"count",type:"number",optional:!0}}),o=(0,n.default)({average:{key:"average",type:"number",optional:!0},distribution:{key:"distribution",type:"object",model:r,optional:!0}}),i=(0,n.default)({total:{key:"total",type:"number",optional:!0},positive:{key:"positive",type:"number",optional:!0}}),a=(0,n.default)({total:{key:"total",type:"number",optional:!0},rating:{key:"rating",type:"object",model:o,optional:!0},recommendations:{key:"recommendations",type:"object",model:i,optional:!0}}),s=(0,n.default)({name:{key:"name",type:"string",optional:!0},title:{key:"title",type:"string",optional:!0},description:{key:"description",type:"string",optional:!0},rating:{key:"rating",type:"number",optional:!0},recommends:{key:"recommends",type:"boolean",optional:!0},created:{key:"created",type:"string",optional:!0}}),c=(0,n.default)({summary:{key:"summary",type:"object",model:a},entries:{key:"entries",type:"object",model:s}});e.Reviews=c})},function(e,t,n){var r,o,i;!function(a,s){o=[t,n(0),n(1)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetCheckoutResponse=e.CreateOrderRedirectResponse=e.CreateOrderResponse=e.CreateOrderRequest=e.Price=e.Payment=e.Cart=e.CartItem=e.PickupPoint=e.Address=e.Customer=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(t),o=(0,r.default)({email:{key:"email",type:"string"},subscribeNewsletter:{key:"subscribe_newsletter",type:"boolean"}}),i=(0,r.default)({name:{key:"name",type:"string"},id:{key:"id",type:"string"},memberId:{key:"member_id",type:"string"}}),a=(0,r.default)({gender:{key:"gender",type:"string"},firstName:{key:"first_name",type:"string"},lastName:{key:"last_name",type:"string"},street:{key:"street",type:"string",optional:!0},zip:{key:"zip",type:"string"},city:{key:"city",type:"string"},countryCode:{key:"country_code",type:"string"},pickupPoint:{key:"pickup_point",type:"object",model:i,optional:!0}}),s=(0,r.default)({sku:{key:"sku",type:"string"},quantity:{key:"quantity",type:"number"}}),c=(0,r.default)({items:{key:"items",type:"object",model:s},itemsOutOfStock:{key:"items_out_of_stock",type:"object",model:s,optional:!0},grossTotal:{key:"gross_total",type:"object",model:n.Price},taxTotal:{key:"tax_total",type:"object",model:n.Price}}),l=(0,r.default)({method:{key:"method",type:"string",optional:!0},selectionPageUrl:{key:"selection_page_url",type:"string",optional:!0},metadata:{key:"metadata",type:"object",optional:!0}}),u=(0,r.default)({service:{key:"service",type:"string"},cost:{key:"cost",type:"object",model:n.Price},earliest:{key:"earliest",type:"string"},latest:{key:"latest",type:"string"}}),d=(0,r.default)({customer:{key:"customer",type:"object",model:o},billingAddress:{key:"billing_address",type:"object",model:a},shippingAddress:{key:"shipping_address",type:"object",model:a},cart:{key:"cart",type:"object",model:c},payment:{key:"payment",type:"object",model:l,optional:!0}}),p=(0,r.default)({orderNumber:{key:"order_number",type:"string"},billingAddress:{key:"billing_address",type:"object",model:a},shippingAddress:{key:"shipping_address",type:"object",model:a},grossTotal:{key:"gross_total",type:"object",model:n.Price},taxTotal:{key:"tax_total",type:"object",model:n.Price},created:{key:"created",type:"string"},externalPaymentURL:{key:"external_payment_url",type:"string",optional:!0}}),y=(0,r.default)({redirectURL:{key:"redirect_url",type:"string"}}),f=(0,r.default)({cart:{key:"cart",type:"object",model:c},billingAddress:{key:"billing_address",type:"object",model:a},shippingAddress:{key:"shipping_address",type:"object",model:a},payment:{key:"payment",type:"object",model:l,optional:!0},grossTotal:{key:"gross_total",type:"object",model:n.Price},taxTotal:{key:"tax_total",type:"object",model:n.Price},delivery:{key:"delivery",type:"object",model:u}});e.Customer=o,e.Address=a,e.PickupPoint=i,e.CartItem=s,e.Cart=c,e.Payment=l,e.Price=n.Price,e.CreateOrderRequest=d,e.CreateOrderResponse=p,e.CreateOrderRedirectResponse=y,e.GetCheckoutResponse=f})},function(e,t,n){var r,o,i;!function(a,s){o=[t,n(3)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})})},function(e,t,n){var r,o,i;!function(a,s){o=[t,n(0),n(1)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RecommendedArticles=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(t),o=(0,r.default)({id:{key:"id",type:"string"},trackingString:{key:"tracking_string",type:"string",optional:!0},name:{key:"name",type:"string"},brand:{key:"brand",type:"object",model:n.Brand},lowestPrice:{key:"lowest_price",type:"object",model:n.Price},images:{key:"images",type:"object",model:n.Image,optional:!0},videos:{key:"images",type:"object",model:n.Video,optional:!0}});e.RecommendedArticles=o})},function(e,t,n){n(12),e.exports=self.fetch.bind(self)},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function c(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&k(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!v(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function y(e,t){t=t||{};var n=t.body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function h(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],k=function(e){return e&&DataView.prototype.isPrototypeOf(e)},v=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},b.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},d.call(y.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var j=[301,302,303,307,308];m.redirect=function(e,t){if(-1===j.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=y,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var o=new y(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:h(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new m(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&b.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){e.exports=n(4)}])});